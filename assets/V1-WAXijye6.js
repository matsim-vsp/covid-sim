import{d as r,n as u,M as c}from"./index-kukdWQKW.js";import{P as l}from"./papaparse.min-B1zZH5bQ.js";import{Z as d}from"./zip-loader.module-BRLILkva.js";import{V as p}from"./vue-slide-bar.min-ngrAMHlR.js";import{V as m}from"./VuePlotly-Caz9Mpa9.js";const h=r({name:"SelectWidget",components:{VueSlideBar:p},props:{state:{type:Object,required:!0},measure:{type:String,required:!0}},data(){return{value:0,stops:[0,1e3]}},mounted(){const s=[];for(const e of this.state.measures[this.measure])s.push(e===1e3?"Never":e);this.stops=s,this.value="Never"},watch:{value(){let s=this.value;s==="Never"&&(s=1e3),this.$emit("changed",this.measure,s)}}});var f=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{attrs:{id:"slider-thing"}},[t("vue-slide-bar",{staticClass:"my-slider",attrs:{speed:0,data:e.stops},model:{value:e.value,callback:function(a){e.value=a},expression:"value"}}),t("p",[e._v(e._s(e.measure))])],1)},v=[],y=u(h,f,v,!1,null,"2b3b0af0");const g=y.exports,_=r({name:"ChartSelector",components:{MySlider:g,VuePlotly:m},props:{state:{type:Object,required:!0}},data(){return{zipFile:"/v1-data.zip",currentRun:{},data:[],layout:{autosize:!0,legend:{orientation:"h"},font:{family:"Roboto,Arial,Helvetica,sans-serif",size:12,color:"#000"},margin:{l:50,t:10,r:10,b:0},yaxis:{autorange:!0},xaxis:{}},loglayout:{autosize:!0,legend:{orientation:"h"},font:{family:"Roboto,Arial,Helvetica,sans-serif",size:12,color:"#000"},margin:{l:50,t:10,r:10,b:0},yaxis:{type:"log",autorange:!0}},options:{displayModeBar:!1,responsive:!0},currentSituation:{},loadedSeriesData:{},zipLoader:{},labels:{nSusceptible:"Susceptible",nInfectedButNotContagious:"Infected, not contagious",nContagious:"Contagious",nSeriouslySick:"Seriously Sick",nCritical:"Critical",nTotalInfected:"Total Infected",nInfectedCumulative:"Infected Cumulative",nRecovered:"Recovered",nInQuarantine:"In Quarantine"}}},mounted(){this.loadZipData()},methods:{async loadZipData(){this.zipLoader=new d(this.zipFile),await this.zipLoader.load(),console.log("zip loaded!"),this.runChanged()},async runChanged(){if(console.log({run:this.currentRun}),this.loadedSeriesData[this.currentRun.RunId]){this.data=this.loadedSeriesData[this.currentRun.RunId];return}const s=await this.loadCSV(this.currentRun),e=this.generateSeriesFromCSVData(s);this.loadedSeriesData[this.currentRun.RunId]=e,this.data=e},sliderChanged(s,e){this.currentSituation[s]=e,this.showPlotForCurrentSituation()},showPlotForCurrentSituation(){let s="";for(const e of Object.keys(this.state.measures))s+=this.currentSituation[e]+"-";this.currentRun=this.state.runLookup[s],this.currentRun&&this.runChanged()},unpack(s,e){let t=s.map(function(a){return e==="day"?a[e]:a[e]*4});return t=t.slice(0,150),t},async loadCSV(s){if(!s.RunId)return[];const e=s.RunId+".infections.txt";console.log("Extracting",e);let t=this.zipLoader.extractAsText(e);return l.parse(t,{header:!0,dynamicTyping:!0}).data},generateSeriesFromCSVData(s){const e=[],t=this.unpack(s,"day");for(const a of Object.keys(this.labels)){const n=this.labels[a],o=this.unpack(s,a);e.push({x:t,y:o,name:n})}return e}}});var b=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{attrs:{id:"main-section"}},[t("div",{staticClass:"pieces"},[t("div",{staticClass:"sliders"},[t("h5",[e._v("Intervention Options")]),t("p",{staticClass:"subhead"},[e._v("Days after outbreak begins:")]),e._l(Object.keys(e.state.measures),function(a){return t("div",{key:a,staticClass:"myslider"},[t("my-slider",{attrs:{measure:a,state:e.state},on:{changed:e.sliderChanged}})],1)})],2),t("div",{staticClass:"linear-plot"},[t("h5",[e._v("Simulated Population Health Outcomes Over Time")]),t("p",[e._v("Linear scale")]),t("vue-plotly",{staticClass:"plotsize",attrs:{data:e.data,layout:e.layout,options:e.options}})],1),t("div",{staticClass:"log-plot"},[t("h5",[e._v("Simulated Population Health Outcomes Over Time")]),t("p",[e._v("Log scale")]),t("vue-plotly",{staticClass:"plotsize",attrs:{data:e.data,layout:e.loglayout,options:e.options}})],1)])])},C=[],S=u(_,b,C,!1,null,"23aa3e4e");const x=S.exports,k=`## v1: Activity reductions at different times

Exploring the effects of several stay-at-home interventions at different times.

The simulations refer to the **Berlin** region (Berlin city plus some surroundings).

The simulations begin on Day 0, with 40 infected individuals in the population. The outcomes below examine consequences of starting various interventions a number of days after the simulation starts.

One clearly sees that "ending all activities" rather quickly kills the infection dynamics, but that as soon as any other activity category out of "work", "social activities", "all other activities" remains open, the infection dynamics runs without restraint through the population.

The limit of the Berlin intensive care system is at about 1000; in consequence, a number of "critical" (purple line) above 1000 indicates overload of that system.

The **base doubling time is approx. 2.1 days**. It corresponds to the German growth rate end Feb/begin Mar, with neither policy measures nor cultural adaptations.
`,w=new c,R=r({name:"V1",components:{SectionViewer:x},data(){return{state:{measures:{},runLookup:{},publicPath:"/"},readme:w.render(k,{})}},async mounted(){const s=await this.loadIndexData();await this.generateScenarioMatrix(s)},methods:{async loadIndexData(){console.log("fetching data");const e=await(await fetch("/v1-info.txt")).text(),t=l.parse(e,{header:!0,dynamicTyping:!0});return console.log({parsed:t.data}),t.data},async generateScenarioMatrix(s){console.log("generating lookups");const e={},t={},a=["Config","Output","RunId","RunScript"];for(const n of Object.keys(s[0]))a.indexOf(n)>-1||(e[n]=new Set);for(const n of s){if(!n.RunId)continue;for(const i of Object.keys(e))n[i]&&e[i].add(n[i]);let o="";for(const i of Object.keys(e))o+=n[i]+"-";t[o]=n}for(const n of Object.keys(e))e[n]=Array.from(e[n].keys()).sort((o,i)=>o-i);console.log({measures:e,runLookup:t}),this.state.measures=e,this.state.runLookup=t}}});var I=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{attrs:{id:"app"}},[t("div",{staticClass:"content"},[t("div",{staticClass:"readme",domProps:{innerHTML:e._s(e.readme)}})]),t("section-viewer",{staticClass:"viewer",attrs:{state:e.state}})],1)},z=[],O=u(R,I,z,!1,null,"932984c9");const F=O.exports;export{F as default};
//# sourceMappingURL=V1-WAXijye6.js.map
